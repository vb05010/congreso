<?php

use Backend\Facades\Backend;
use GromIT\Forms\Classes\Permissions;

/**
 * @var \GromIT\Forms\Controllers\Submissions $this
 */
?>
<div data-control="toolbar">
    <?php if ($this->user->hasAccess(Permissions::EDIT_FORMS)): ?>
        <a href="<?= Backend::url('gromit/forms/forms') ?>"
           class="btn btn-secondary oc-icon-arrow-left">
            <?= __('gromit.forms::lang.controllers.submissions.btn_back_to_forms') ?>
        </a>
    <?php endif ?>

    <?php if ($this->user->hasAccess(Permissions::DELETE_SUBMISSIONS)): ?>
        <button class="btn btn-danger oc-icon-trash-o"
                disabled="disabled"
                onclick="$(this).data('request-data', { checked: $('.control-list').listWidget('getChecked') })"
                data-request="onDelete"
                data-request-confirm="<?= __('gromit.forms::lang.controllers.submissions.btn_delete_selected_confirm') ?>"
                data-trigger-action="enable"
                data-trigger=".control-list input[type=checkbox]"
                data-trigger-condition="checked"
                data-request-success="$(this).prop('disabled', 'disabled')"
                data-stripe-load-indicator>
            <?= __('gromit.forms::lang.controllers.submissions.btn_delete_selected') ?>
        </button>
    <?php endif ?>

    <?php if ($this->user->hasAccess(Permissions::EXPORT_SUBMISSIONS)): ?>
        <button class="btn btn-secondary oc-icon-file-excel-o"
                data-control="popup"
                data-handler="onShowExportPopup">
            <?= __('gromit.forms::lang.controllers.submissions.btn_export') ?>
        </button>
    <?php endif; ?>
</div>
