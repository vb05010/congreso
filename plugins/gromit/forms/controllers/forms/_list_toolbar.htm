<?php

use Backend\Facades\Backend;
use GromIT\Forms\Classes\Permissions;

/**
 * @var \GromIT\Forms\Controllers\Forms $this
 */
?>
<div data-control="toolbar">
    <a href="<?= $this->actionUrl('create') ?>"
       class="btn btn-primary oc-icon-plus">
        <?= __('gromit.forms::lang.controllers.forms.btn_add_form') ?>
    </a>

    <?php if ($this->user->hasAccess(Permissions::DELETE_SUBMISSIONS)): ?>
        <button class="btn btn-danger oc-icon-trash-o"
                disabled="disabled"
                onclick="$(this).data('request-data', { checked: $('.control-list').listWidget('getChecked') })"
                data-request="onDelete"
                data-request-confirm="<?= __('gromit.forms::lang.controllers.forms.btn_delete_selected_forms_confirm') ?>"
                data-trigger-action="enable"
                data-trigger=".control-list input[type=checkbox]"
                data-trigger-condition="checked"
                data-request-success="$(this).prop('disabled', 'disabled')"
                data-stripe-load-indicator>
            <?= __('gromit.forms::lang.controllers.forms.btn_delete_selected_forms') ?>
        </button>
    <?php endif ?>

    <button class="btn btn-default oc-icon-upload"
            data-control="popup"
            data-handler="onShowUploadFormPopup">
        <?= __('gromit.forms::lang.controllers.forms.btn_upload_form') ?>
    </button>

    <?php if ($this->user->hasAccess(Permissions::SHOW_SUBMISSIONS)): ?>
        <a href="<?= Backend::url('gromit/forms/submissions') ?>"
           class="btn btn-default oc-icon-vcard">
            <?= __('gromit.forms::lang.controllers.forms.btn_submissions') ?>
        </a>
    <?php endif ?>
</div>
